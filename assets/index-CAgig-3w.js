(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function o(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?n.credentials="include":t.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(t){if(t.ep)return;t.ep=!0;const n=o(t);fetch(t.href,n)}})();const s="19b6804e4ba91eaa24709d0f978f7443";let l="Tunis";document.querySelector("#changer").addEventListener("click",async()=>{const r=prompt("Quelle ville souhaitez-vous voir ?");r&&(l=r,await c(l))});async function u(){return new Promise((r,e)=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(o=>{const i=o.coords.latitude,t=o.coords.longitude;r({latitude:i,longitude:t})},o=>e(o)):e("La géolocalisation n'est pas disponible")})}async function c(r){let e;if(console.log("Demande de température pour :",r),r==="localisation")try{const o=await u();console.log("Position obtenue :",o),e=`https://api.openweathermap.org/data/2.5/weather?lat=${o.latitude}&lon=${o.longitude}&appid=${s}&units=metric`}catch(o){alert("Erreur lors de la récupération de la position : "+o.message);return}else e=`https://api.openweathermap.org/data/2.5/weather?q=${r}&appid=${s}&units=metric`;try{const o=await fetch(e);if(!o.ok)throw new Error("Problème de récupération des données");const i=await o.json();console.log("Données météo récupérées :",i);const t=i.main.temp,n=i.name,a=i.weather[0].main.toLowerCase();document.querySelector("#temperature_label").textContent=t,document.querySelector("#ville").textContent=n,d(t),f(a)}catch(o){alert("Erreur : "+o.message)}}function d(r){const e=document.querySelector("body");e.classList.add("transition-all","duration-500","ease-in-out"),e.classList.remove("from-yellow-400","via-orange-500","to-red-500","from-blue-300","via-blue-400","to-blue-600","from-blue-500","via-gray-600","to-gray-800"),r>25?e.classList.add("bg-gradient-to-r","from-yellow-400","via-orange-500","to-red-500"):r>=15&&r<=25?e.classList.add("bg-gradient-to-r","from-blue-300","via-blue-400","to-blue-600"):e.classList.add("bg-gradient-to-r","from-blue-500","via-gray-600","to-gray-800")}function f(r){const e=document.querySelector("body");e.classList.remove("snow-effect","rain-effect"),r==="rain"?e.classList.add("rain-effect"):r==="snow"&&e.classList.add("snow-effect")}c("localisation");
